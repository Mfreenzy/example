# Prototype

Это прототип архитектуры проекта ProCharity для изучения сборки микро-фронтенда на основе Webpack Module Federation для vite. А также интеграция с бекендом микросервисов на основе Moleculer.

Проект сделан на JS, без типизации чтобы сконцентрироваться именно на настройках сборки и интеграции, так что код не претендует на эталонность и качество. Важнее обратить внимание на то как настроены vite.config.js файлы, докер и core микросервисы.

## Структура проекта

- `core` - корневой загрузчик микросервисов
- `services` - микросервисы и микрофронтенды бизнес-логики
- `uikit` - библиотека компонентов для микрофронтендов
- `api` - код серверной бизнес логики
- `nginx` - конфигурация nginx для проксирования запросов к микросервисам и формирования единого фронтенда из частей (под одним адресом, ключевое)
- `docker-compose.yml` - файл для запуска всех микросервисов и фронтенда в докере

## Установка и запуск

1. Установить зависимости
```bash
yarn
```

2. Собрать интерфейсы
```bash
yarn build
```

3. Запустить бекенд
```bash
yarn dev
```

4. Запустить фронтенд
```bash
yarn server
```

5. Открыть в браузере

Открыть в браузере [http://localhost](http://localhost)

Адрес инстанса лаборатории смотрите в выводе `yarn dev`.

## Известные проблемы
- пока не работает шаринг контекста между микрофронтендами, временно контекст читается из локального хранилища, но это не правильно и в прочарити добавим глобальный менеджер состояний для обмена данными
- чтобы обновить интерфейсы их надо пересобрать, а после обновить страницу в браузере, иначе нужно проксировать запросы к дев-серверу, но в этом случае придется код копировать и запускать внутри докера чтобы контролировать порты
